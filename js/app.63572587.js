(function(){"use strict";var t={6001:function(t,e,a){var r=a(6369),i=function(){var t=this,e=t._self._c;return e("div",[e("header",{staticClass:"header container"},[e("div",{staticClass:"header__wrapper"},[e("span",{staticClass:"header__info"},[t._v("Каталог")]),t._m(0),e("a",{staticClass:"header__tel",attrs:{href:"tel:8 800 600 90 09"}},[t._v(" 8 800 600 90 09 ")]),e("CartIndicator")],1)]),e("router-view",{key:t.$route.fullPath}),e("footer",{staticClass:"footer container"},[e("div",{staticClass:"footer__wrapper"},[t._m(1),e("ul",{staticClass:"footer__social social"},[e("li",{staticClass:"social__item"},[e("a",{staticClass:"social__link",attrs:{href:"#","aria-label":"Вконтакте"}},[e("svg",{attrs:{width:"20",height:"11",fill:"currentColor"}},[e("use",{attrs:{"xlink:href":"#icon-vk"}})])])]),e("li",{staticClass:"social__item"},[e("a",{staticClass:"social__link",attrs:{href:"#","aria-label":"Инстаграм"}},[e("svg",{attrs:{width:"17",height:"17",fill:"currentColor"}},[e("use",{attrs:{"xlink:href":"#icon-insta"}})])])]),e("li",{staticClass:"social__item"},[e("a",{staticClass:"social__link",attrs:{href:"#","aria-label":"Facebook"}},[e("svg",{attrs:{width:"17",height:"17",fill:"currentColor"}},[e("use",{attrs:{"xlink:href":"#icon-facebook"}})])])]),e("li",{staticClass:"social__item"},[e("a",{staticClass:"social__link",attrs:{href:"#","aria-label":"Twitter"}},[e("svg",{attrs:{width:"17",height:"14",fill:"currentColor"}},[e("use",{attrs:{"xlink:href":"#icon-twitter"}})])])]),e("li",{staticClass:"social__item"},[e("a",{staticClass:"social__link",attrs:{href:"#","aria-label":"Telegram"}},[e("svg",{attrs:{width:"19",height:"17",fill:"currentColor"}},[e("use",{attrs:{"xlink:href":"#icon-telegram"}})])])])]),e("p",{staticClass:"footer__desc"},[t._v(" Все права на материалы, находящиеся на сайте, охраняются в соответствии с законодательством РФ, в том числе об авторском праве и смежных правах. ")]),t._m(2),e("span",{staticClass:"footer__copyright"},[t._v(" © 2020 Moire ")])])])],1)},s=[function(){var t=this,e=t._self._c;return e("a",{staticClass:"header__logo",attrs:{href:"#"}},[e("img",{attrs:{src:"img/svg/logo-moire.svg",alt:"Логотип интернет магазина Moire",width:"116",height:"34"}})])},function(){var t=this,e=t._self._c;return e("ul",{staticClass:"footer__links"},[e("li",[e("a",{staticClass:"footer__link",attrs:{href:"#"}},[t._v(" Каталог ")])]),e("li",[e("a",{staticClass:"footer__link",attrs:{href:"tel:88006009009"}},[t._v(" 8 800 600 90 09 ")])]),e("li",[e("a",{staticClass:"footer__link",attrs:{href:"mailto:hi@technozavrrr.com"}},[t._v(" hi@technozavrrr.com ")])]),e("li",[e("a",{staticClass:"footer__link",attrs:{href:"#"}},[t._v(" Распродажа ")])]),e("li",[e("a",{staticClass:"footer__link footer__link--medium",attrs:{href:"#"}},[t._v(" Заказать звонок ")])])])},function(){var t=this,e=t._self._c;return e("ul",{staticClass:"footer__data"},[e("li",[e("a",{staticClass:"footer__link",attrs:{href:"#",target:"_blank",rel:"noopener",type:"application/pdf"}},[t._v(" Политика конфиденциальности ")])]),e("li",[e("a",{staticClass:"footer__link",attrs:{href:"#",target:"_blank",rel:"noopener",type:"application/pdf"}},[t._v(" Публичная оферта ")])])])}],o=function(){var t=this,e=t._self._c;return t.isCartLoading||t.isAddLoading?e("div",{staticClass:"spinner-9"}):e("router-link",{staticClass:"header__cart",attrs:{to:{name:"cart"},"aria-label":"Корзина с товарами"}},[e("svg",{attrs:{width:"19",height:"24"}},[e("use",{attrs:{"xlink:href":"#icon-cart"}})]),e("span",{staticClass:"header__count",attrs:{"aria-label":"Количество товаров"}},[t._v(t._s(t.totalAmount))])])},l=[],n=a(2299),c=a.n(n),d={computed:{...(0,n.mapState)(["isCartLoading","isCartLoadingFailed","isAddLoading"]),...(0,n.mapGetters)({totalAmount:"getCartProductsAmount"})}},u=d,p=a(1001),m=(0,p.Z)(u,o,l,!1,null,null,null),_=m.exports,f={components:{CartIndicator:_},methods:{...(0,n.mapActions)(["loadCart"]),...(0,n.mapMutations)(["updateUserAccessKey"])},created(){const t=localStorage.getItem("userAccessKey");t&&this.updateUserAccessKey(t),this.loadCart()}},h=f,v=(0,p.Z)(h,i,s,!1,null,null,null),g=v.exports,C={setProducts(t,e){t.productsData=e},setMaterials(t,e){t.materialsData=e},setColors(t,e){t.colorsData=e},setCategories(t,e){t.categoriesData=e},setSeasons(t,e){t.seasonsData=e},setDeliveries(t,e){t.deliveriesData=e},setPayments(t,e){t.paymentsData=e},updateProductsCartData(t,e){t.productsCartData=e},updateUserAccessKey(t,e){t.userAccessKey=e},updateCartProductsAmount(t,{productId:e,amount:a}){const r=t.cartData.find((t=>t.productId===e));r&&(r.amount=a)},updateOrderInfo(t,e){t.orderData=e},syncProductsCart(t){t.cartData=t.productsCartData.map((t=>({...t})))},deleteProductCart(t,{productId:e}){t.cartData=t.cartData.filter((t=>t.productId!==e))},resetCart(t){t.cartData=[],t.productsCartData=[]},updateProductsStatusLoading(t,e){t.isProductsLoading=e},updateProductsStatusLoadingFailed(t,e){t.isProductsLoadingFailed=e},updateCartStatusLoading(t,e){t.isCartLoading=e},updateCartStatusLoadingFailed(t,e){t.isCartLoadingFailed=e},updateAddLoading(t,e){t.isAddLoading=e},updateAddLoadingFailed(t,e){t.isAddLoadingFailed=e},updateisAddLoadingEnded(t,e){t.isAddLoadingEnded=e},updateOrderDataLoading(t,e){t.isOrderLoading=e},updateOrderDataLoadingFailed(t,e){t.isOrderLoadingFailed=e},updateSendOrderLoading(t,e){t.isSendOrderLoading=e},updateSendOrderLoadingFailed(t,e){t.isSendOrderLoadingFailed=e},updateDeleteLoading(t,e){t.isDeleteLoading=e},updateDeleteLoadingFailed(t,e){t.isDeleteLoadingFailed=e}},y=a(1076),b={loadProducts(t,e){return t.commit("updateProductsStatusLoading",!0),t.commit("updateProductsStatusLoadingFailed",!1),y.Z.get("https://vue-moire.skillbox.cc/api/products",{params:e}).then((e=>t.commit("setProducts",e.data))).catch((()=>{t.commit("updateProductsStatusLoading",!1),t.commit("updateProductsStatusLoadingFailed",!0)})).finally((()=>t.commit("updateProductsStatusLoading",!1)))},loadMaterials(t){return y.Z.get("https://vue-moire.skillbox.cc/api/materials").then((e=>t.commit("setMaterials",e.data.items)))},loadColors(t){return y.Z.get("https://vue-moire.skillbox.cc/api/colors").then((e=>t.commit("setColors",e.data.items)))},loadCategories(t){return y.Z.get("https://vue-moire.skillbox.cc/api/productCategories").then((e=>t.commit("setCategories",e.data.items)))},loadSeasons(t){return y.Z.get("https://vue-moire.skillbox.cc/api/seasons").then((e=>t.commit("setSeasons",e.data.items)))},loadCart(t){return t.commit("updateCartStatusLoading",!0),t.commit("updateCartStatusLoadingFailed",!1),y.Z.get("https://vue-moire.skillbox.cc/api/baskets",{params:{userAccessKey:t.state.userAccessKey}}).then((e=>{t.state.userAccessKey||(localStorage.setItem("userAccessKey",e.data.user.accessKey),t.commit("updateUserAccessKey",e.data.user.accessKey)),t.commit("updateProductsCartData",e.data.items),t.commit("syncProductsCart")})).catch((()=>{t.commit("updateCartStatusLoading",!1),t.commit("updateCartStatusLoadingFailed",!0)})).finally((()=>t.commit("updateCartStatusLoading",!1)))},loadDeliveries(t){return y.Z.get("https://vue-moire.skillbox.cc/api/deliveries").then((e=>t.commit("setDeliveries",e.data)))},loadPayments(t,{deliveryTypeId:e}){return y.Z.get("https://vue-moire.skillbox.cc/api/payments",{params:{deliveryTypeId:e}}).then((e=>t.commit("setPayments",e.data)))},loadOrderInfo(t,{orderId:e}){return t.commit("updateOrderDataLoading",!0),t.commit("updateOrderDataLoadingFailed",!1),y.Z.get(`https://vue-moire.skillbox.cc/api/orders/${e}`,{params:{userAccessKey:t.state.userAccessKey}}).then((e=>t.commit("updateOrderInfo",e.data))).catch((()=>{t.commit("updateOrderDataLoading",!1),t.commit("updateOrderDataLoadingFailed",!0)})).finally((()=>t.commit("updateOrderDataLoading",!1)))},addProductToCart(t,{productId:e,colorId:a,sizeId:r,amount:i}){return t.commit("updateAddLoading",!0),t.commit("updateAddLoadingFailed",!1),t.commit("updateisAddLoadingEnded",!1),y.Z.post("https://vue-moire.skillbox.cc/api/baskets/products",{productId:e,colorId:a,sizeId:r,quantity:i},{params:{userAccessKey:t.state.userAccessKey}}).then((e=>{t.commit("updateProductsCartData",e.data.items),t.commit("syncProductsCart")})).catch((()=>{t.commit("updateAddLoading",!1),t.commit("updateAddLoadingFailed",!0)})).finally((()=>{t.commit("updateAddLoading",!1),t.commit("updateisAddLoadingEnded",!0),setTimeout((()=>t.commit("updateisAddLoadingEnded",!1)),3e3)}))},updateCartProductAmount(t,{productId:e,amount:a,basketItemId:r}){if(t.commit("updateCartProductsAmount",{productId:e,amount:a}),!(a<1))return y.Z.put("https://vue-moire.skillbox.cc/api/baskets/products",{basketItemId:r,quantity:a},{params:{userAccessKey:t.state.userAccessKey}}).then((e=>{t.commit("updateProductsCartData",e.data.items),t.commit("syncProductsCart")})).catch((()=>t.commit("syncProductsCart")))},deleteProductFromCart(t,{basketItemId:e,productId:a}){return t.commit("deleteProductCart",{productId:a}),t.commit("updateDeleteLoading",!0),t.commit("updateDeleteLoadingFailed",!1),y.Z.delete("https://vue-moire.skillbox.cc/api/baskets/products",{params:{userAccessKey:t.state.userAccessKey},data:{basketItemId:e,productId:a}}).then((e=>{t.commit("updateProductsCartData",e.data.items),t.commit("syncProductsCart")})).catch((()=>{t.commit("updateDeleteLoading",!1),t.commit("updateDeleteLoadingFailed",!0)})).finally((()=>t.commit("updateDeleteLoading",!1)))}},P={getCart(t){return t.cartData},getCartDetailsProduct(t){return t.cartData.map((e=>{const a=t.productsCartData.find((t=>t.product.id===t.productId));return{...a,...e}}))},getCartProductsAmount(t,e){return e.getCartDetailsProduct.length},getCartTotalPrice(t,e){return e.getCartDetailsProduct.reduce(((t,e)=>e.quantity*e.price+t),0)},getTotalProductsAmount(t,e){return e.getCartDetailsProduct.reduce(((t,e)=>e.quantity+t),0)},getOrderDeatails(t){return{...t.orderData,items:t.orderData.basket.items.map((t=>({...t})))}},getOrderTotalAmount(t,e){return e.getOrderDeatails.items.reduce(((t,e)=>e.quantity+t),0)}};r.ZP.use(c());var I=new(c().Store)({state:{productsData:null,isProductsLoading:!1,isProductsLoadingFailed:!1,materialsData:null,colorsData:null,categoriesData:null,seasonsData:null,deliveriesData:null,paymentsData:null,orderData:null,isOrderLoading:!1,isOrderLoadingFailed:!1,productsCartData:[],cartData:[],isCartLoading:!1,isCartLoadingFailed:!1,userAccessKey:null,isAddLoading:!1,isAddLoadingEnded:!1,isAddLoadingFailed:!1,isDeleteLoading:!1,isDeleteLoadingFailed:!1},getters:P,mutations:C,actions:b}),k=a(2631),D=function(){var t=this,e=t._self._c;return e("main",{staticClass:"content container"},[e("div",{staticClass:"content__top"},[e("div",{staticClass:"content__row"},[e("h1",{staticClass:"content__title"},[t._v(" Каталог ")]),e("span",{staticClass:"content__info"},[t._v(" "+t._s(t.countProducts)+" товара ")])])]),e("div",{staticClass:"content__catalog"},[e("ProductFilter",{attrs:{"price-from":t.filterPriceFrom,"price-to":t.filterPriceTo,"category-id":t.filterCategoryId,"color-id":t.filterColorId,"material-id":t.filterMaterialId,"season-id":t.filterSeasonId,"products-per-page":t.productsPerPage},on:{"update:priceFrom":function(e){t.filterPriceFrom=e},"update:price-from":function(e){t.filterPriceFrom=e},"update:priceTo":function(e){t.filterPriceTo=e},"update:price-to":function(e){t.filterPriceTo=e},"update:categoryId":function(e){t.filterCategoryId=e},"update:category-id":function(e){t.filterCategoryId=e},"update:colorId":function(e){t.filterColorId=e},"update:color-id":function(e){t.filterColorId=e},"update:materialId":function(e){t.filterMaterialId=e},"update:material-id":function(e){t.filterMaterialId=e},"update:seasonId":function(e){t.filterSeasonId=e},"update:season-id":function(e){t.filterSeasonId=e},"update:productsPerPage":function(e){t.productsPerPage=e},"update:products-per-page":function(e){t.productsPerPage=e}}}),e("section",{staticClass:"catalog"},[t.isProductsLoading?e("div",{staticStyle:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center",width:"100%",height:"100%"}},[e("div",{staticClass:"spinner-4"}),e("h2",{staticStyle:{"padding-top":"25px"}},[t._v(" Загрузка списка товара... ")])]):e("ProductsList",{attrs:{products:t.products}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isProductsLoadingFailed,expression:"isProductsLoadingFailed"}],staticStyle:{margin:"0 auto"}},[e("p",[t._v(" Похоже произошла ошибка. Попробуйте перезагрузить страницу. ")])]),e("BasePagination",{attrs:{count:t.countProducts,"per-page":t.productsPerPage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1)],1)])},x=[],L=function(){var t=this,e=t._self._c;return e("ul",{staticClass:"catalog__list"},t._l(t.products,(function(t){return e("ProductItem",{key:t.id,attrs:{id:t.id,title:t.title,price:t.price,images:t.images,colors:t.colors}})})),1)},A=[],S=function(){var t=this,e=t._self._c;return e("li",{staticClass:"catalog__item"},[e("router-link",{staticClass:"catalog__pic",attrs:{to:{name:"product",params:{id:t.id}}}},[e("img",{attrs:{src:t.images[t.currentColorId].image,alt:t.title}})]),e("button",{staticClass:"item__button button-mainpage button--primery",attrs:{type:"submit",disabled:t.isAddLoading},on:{click:function(e){return e.preventDefault(),t.addProduct.apply(null,arguments)}}},[t._v(" В корзину ")]),e("h3",{staticClass:"catalog__title"},[e("a",{attrs:{href:"#"}},[t._v(" "+t._s(t.title)+" ")])]),e("span",{staticClass:"catalog__price"},[t._v(" "+t._s(t.price)+" ")]),e("ul",{staticClass:"colors colors--black"},t._l(t.colors,(function(a){return e("li",{key:a.colorId,staticClass:"colors__item"},[e("label",{staticClass:"colors__label",on:{click:function(e){return e.preventDefault(),t.changeImage(a.colorProductId)},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.changeImage(a.colorProductId)}}},[e("input",{staticClass:"colors__radio sr-only",attrs:{type:"radio",name:"color-"+a.colorProductId},domProps:{value:a.colorCode,checked:t.activeColorId===a.colorProductId}}),e("span",{staticClass:"colors__value",style:{"background-color":a.colorCode}})])])})),0)],1)},w=[],T={data(){return{currentColorId:0,productData:null}},props:["id","title","price","images","colors"],computed:{...(0,n.mapState)(["isAddLoading"]),activeColorId(){return this.colors[this.currentColorId].colorProductId}},methods:{...(0,n.mapActions)(["addProductToCart","loadProduct"]),changeImage(t){const e=this.colors.findIndex((e=>e.colorProductId===t));this.currentColorId=e},loadProduct(){return y.Z.get(`https://vue-moire.skillbox.cc/api/products/${this.id}`).then((t=>this.productData=t.data))},addProduct(){this.addProductToCart({productId:this.id,colorId:this.productData.colors[0].color.id,sizeId:this.productData.sizes[0].id,amount:1})}},created(){this.loadProduct()}},F=T,O=(0,p.Z)(F,S,w,!1,null,null,null),$=O.exports,Z={props:["products"],components:{ProductItem:$}},M=Z,V=(0,p.Z)(M,L,A,!1,null,null,null),E=V.exports,N=function(){var t=this,e=t._self._c;return e("ul",{staticClass:"catalog__pagination pagination"},[e("li",{staticClass:"pagination__item"},[e("a",{staticClass:"pagination__link pagination__link--arrow",class:{"pagination__link--disabled":1===t.page},attrs:{"aria-label":"Предыдущая страница"},on:{click:function(e){return e.preventDefault(),t.prevPage.apply(null,arguments)},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.prevPage.apply(null,arguments)}}},[e("svg",{attrs:{width:"8",height:"14",fill:"currentColor"}},[e("use",{attrs:{"xlink:href":"#icon-arrow-left"}})])])]),t._l(t.pages,(function(a){return e("li",{key:a,staticClass:"pagination__item"},[e("a",{staticClass:"pagination__link",class:{"pagination__link--current":a===t.page},on:{click:function(e){return e.preventDefault(),t.paginate(a)},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.paginate(a)}}},[t._v(" "+t._s(a)+" ")])])})),e("li",{staticClass:"pagination__item"},[e("a",{staticClass:"pagination__link pagination__link--arrow",class:{"pagination__link--disabled":t.page===t.pages},attrs:{href:"#","aria-label":"Следующая страница"},on:{click:function(e){return e.preventDefault(),t.nextPage.apply(null,arguments)},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.nextPage.apply(null,arguments)}}},[e("svg",{attrs:{width:"8",height:"14",fill:"currentColor"}},[e("use",{attrs:{"xlink:href":"#icon-arrow-right"}})])])])],2)},K=[],z={model:{prop:"page",event:"paginate"},props:["perPage","count","page"],computed:{pages(){return Math.ceil(this.count/this.perPage)}},methods:{paginate(t){return this.$emit("paginate",t)},prevPage(){return this.$emit("paginate",this.page-1)},nextPage(){return this.$emit("paginate",this.page+1)}}},B=z,q=(0,p.Z)(B,N,K,!1,null,null,null),j=q.exports,U=function(){var t=this,e=t._self._c;return e("aside",{staticClass:"filter"},[e("fieldset",{staticClass:"form__block"},[e("legend",{staticClass:"form__legend"},[t._v("Количество товаров")]),e("label",{staticClass:"form__label form__label--select"},[e("select",{directives:[{name:"model",rawName:"v-model.number",value:t.currentProductsPerPage,expression:"currentProductsPerPage",modifiers:{number:!0}}],staticClass:"form__select",attrs:{type:"text",name:"productsPerPage"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(e){var a="_value"in e?e._value:e.value;return t._n(a)}));t.currentProductsPerPage=e.target.multiple?a:a[0]},function(e){return e.preventDefault(),t.doProductsPerPage.apply(null,arguments)}]}},[e("option",{attrs:{value:"4"}},[t._v("4")]),e("option",{attrs:{value:"8"}},[t._v("8")]),e("option",{attrs:{value:"12"}},[t._v("12")])])])]),e("form",{staticClass:"filter__form form",attrs:{action:"#",method:"get"},on:{submit:function(e){return e.preventDefault(),t.doSubmit.apply(null,arguments)}}},[e("fieldset",{staticClass:"form__block"},[e("legend",{staticClass:"form__legend"},[t._v("Цена")]),e("label",{staticClass:"form__label form__label--price"},[e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.currentPriceFrom,expression:"currentPriceFrom",modifiers:{number:!0}}],staticClass:"form__input",attrs:{onfocus:"this.value=''",type:"text",name:"min-price"},domProps:{value:t.currentPriceFrom},on:{input:function(e){e.target.composing||(t.currentPriceFrom=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),e("span",{staticClass:"form__value"},[t._v("От")])]),e("label",{staticClass:"form__label form__label--price"},[e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.currentPriceTo,expression:"currentPriceTo",modifiers:{number:!0}}],staticClass:"form__input",attrs:{onfocus:"this.value=''",type:"text",name:"max-price"},domProps:{value:t.currentPriceTo},on:{input:function(e){e.target.composing||(t.currentPriceTo=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),e("span",{staticClass:"form__value"},[t._v("До")])])]),e("fieldset",{staticClass:"form__block"},[e("legend",{staticClass:"form__legend"},[t._v("Категория")]),e("label",{staticClass:"form__label form__label--select"},[e("select",{directives:[{name:"model",rawName:"v-model.number",value:t.currentCategoryId,expression:"currentCategoryId",modifiers:{number:!0}}],staticClass:"form__select",attrs:{type:"text",name:"category"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(e){var a="_value"in e?e._value:e.value;return t._n(a)}));t.currentCategoryId=e.target.multiple?a:a[0]}}},[e("option",{attrs:{disabled:"",value:"0"}},[t._v("Все категории")]),t._l(t.categoriesData,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(" "+t._s(a.title)+" ")])}))],2)])]),e("fieldset",{staticClass:"form__block"},[e("legend",{staticClass:"form__legend"},[t._v("Цвет")]),e("ul",{staticClass:"colors colors--black"},t._l(t.colorsData,(function(a){return e("li",{key:a.id,staticClass:"colors__item"},[e("label",{staticClass:"colors__label"},[e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.currentColorId,expression:"currentColorId",modifiers:{number:!0}}],staticClass:"colors__radio sr-only",attrs:{type:"radio"},domProps:{value:a.id,checked:t._q(t.currentColorId,t._n(a.id))},on:{change:function(e){t.currentColorId=t._n(a.id)}}}),e("span",{staticClass:"colors__value",style:{"background-color":a.code}})])])})),0)]),e("fieldset",{staticClass:"form__block"},[e("legend",{staticClass:"form__legend"},[t._v("Материал")]),e("ul",{staticClass:"check-list"},t._l(t.materialsData,(function(a){return e("li",{key:a.id,staticClass:"check-list__item"},[e("label",{staticClass:"check-list__label"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.currentMaterialId,expression:"currentMaterialId"}],staticClass:"check-list__check sr-only",attrs:{type:"checkbox",name:"material"},domProps:{value:a.id,checked:Array.isArray(t.currentMaterialId)?t._i(t.currentMaterialId,a.id)>-1:t.currentMaterialId},on:{change:function(e){var r=t.currentMaterialId,i=e.target,s=!!i.checked;if(Array.isArray(r)){var o=a.id,l=t._i(r,o);i.checked?l<0&&(t.currentMaterialId=r.concat([o])):l>-1&&(t.currentMaterialId=r.slice(0,l).concat(r.slice(l+1)))}else t.currentMaterialId=s}}}),e("span",{staticClass:"check-list__desc"},[t._v(" "+t._s(a.title)+" "),e("span",[t._v(t._s(a.productsCount))])])])])})),0)]),e("fieldset",{staticClass:"form__block"},[e("legend",{staticClass:"form__legend"},[t._v("Коллекция")]),e("ul",{staticClass:"check-list"},t._l(t.seasonsData,(function(a){return e("li",{key:a.id,staticClass:"check-list__item"},[e("label",{staticClass:"check-list__label"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.currentSeasonId,expression:"currentSeasonId"}],staticClass:"check-list__check sr-only",attrs:{type:"checkbox",name:"collection"},domProps:{value:a.id,checked:Array.isArray(t.currentSeasonId)?t._i(t.currentSeasonId,a.id)>-1:t.currentSeasonId},on:{change:function(e){var r=t.currentSeasonId,i=e.target,s=!!i.checked;if(Array.isArray(r)){var o=a.id,l=t._i(r,o);i.checked?l<0&&(t.currentSeasonId=r.concat([o])):l>-1&&(t.currentSeasonId=r.slice(0,l).concat(r.slice(l+1)))}else t.currentSeasonId=s}}}),e("span",{staticClass:"check-list__desc"},[t._v(" "+t._s(a.title)+" "),e("span",[t._v(t._s(a.productsCount))])])])])})),0)]),e("button",{staticClass:"filter__submit button button--primery",attrs:{type:"submit"}},[t._v(" Применить ")]),t.currentPriceTo>0||t.currentCategoryId>0||t.currentColorId>0||t.currentMaterialId.length>0||t.currentSeasonId.length>0||t.currentPriceFrom>0?e("button",{staticClass:"filter__reset button button--second",on:{click:function(e){return e.preventDefault(),t.doReset.apply(null,arguments)}}},[t._v(" Сбросить ")]):t._e()])])},R=[],G={data(){return{currentProductsPerPage:4,currentPriceFrom:0,currentPriceTo:0,currentCategoryId:0,currentColorId:0,currentSeasonId:[],currentMaterialId:[]}},props:["priceFrom","priceTo","categoryId","materialId","seasonId","colorId","productsPerPage"],computed:{...(0,n.mapState)(["categoriesData","materialsData","seasonsData","colorsData"])},methods:{...(0,n.mapActions)(["loadCategories","loadMaterials","loadSeasons","loadColors"]),doSubmit(){this.$emit("update:priceFrom",this.currentPriceFrom),this.$emit("update:priceTo",this.currentPriceTo),this.$emit("update:categoryId",this.currentCategoryId),this.$emit("update:colorId",this.currentColorId),this.$emit("update:materialId",this.currentMaterialId),this.$emit("update:seasonId",this.currentSeasonId)},doReset(){this.$emit("update:priceFrom",this.currentPriceFrom=0),this.$emit("update:priceTo",this.currentPriceTo=0),this.$emit("update:categoryId",this.currentCategoryId=0),this.$emit("update:colorId",this.currentColorId=0),this.$emit("update:materialId",this.currentMaterialId=[]),this.$emit("update:seasonId",this.currentSeasonId=[])},doProductsPerPage(){this.$emit("update:productsPerPage",this.currentProductsPerPage)}},created(){this.loadCategories(),this.loadMaterials(),this.loadSeasons(),this.loadColors()}},H=G,J=(0,p.Z)(H,U,R,!1,null,null,null),Q=J.exports;function W(t){return new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB"}).format(t)}var X={data(){return{page:1,productsPerPage:4,filterPriceFrom:0,filterPriceTo:0,filterCategoryId:0,filterColorId:0,filterSeasonId:[],filterMaterialId:[]}},components:{ProductsList:E,BasePagination:j,ProductFilter:Q},computed:{...(0,n.mapState)(["productsData","isProductsLoading","isProductsLoadingFailed"]),products(){return this.productsData?this.productsData.items.map((t=>({...t,price:W(t.price),colors:t.colors.map((t=>({colorProductId:t.id,colorCode:t.color.code,colorId:t.color.id,colorTitle:t.color.title}))),images:t.colors.map((t=>({image:null!==t.gallery?t.gallery[0].file.url:"https://westsiderc.org/wp-content/uploads/2019/08/Image-Not-Available.png"})))}))):[]},countProducts(){return this.productsData?this.productsData.pagination.total:0}},methods:{...(0,n.mapActions)(["loadProducts"]),loadProduct(){this.loadProducts({page:this.page,limit:this.productsPerPage,minPrice:this.filterPriceFrom,maxPrice:this.filterPriceTo,categoryId:this.filterCategoryId,materialIds:this.filterMaterialId,seasonIds:this.filterSeasonId,colorIds:this.filterColorId})}},watch:{page(){this.loadProduct()},filterPriceFrom(){this.loadProduct()},filterPriceTo(){this.loadProduct()},filterCategoryId(){this.loadProduct()},filterColorId(){this.loadProduct()},filterMaterialId(){this.loadProduct()},filterSeasonId(){this.loadProduct()},productsPerPage(){this.loadProduct()}},created(){this.loadProduct()}},Y=X,tt=(0,p.Z)(Y,D,x,!1,null,null,null),et=tt.exports,at=function(){var t=this,e=t._self._c;return e("main",{staticClass:"content container"},[e("div",{staticClass:"content__top"},[e("ul",{staticClass:"breadcrumbs"},[e("li",{staticClass:"breadcrumbs__item"},[e("router-link",{staticClass:"breadcrumbs__link",attrs:{to:{name:"main"}}},[t._v(" Каталог ")])],1),t._m(0)]),e("div",{staticClass:"content__row"},[e("h1",{staticClass:"content__title"},[t._v(" Корзина ")]),e("span",{staticClass:"content__info"},[t._v(" "+t._s(t.totalAmount)+" товара ")])])]),e("section",{staticClass:"cart"},[e("form",{staticClass:"cart__form form",attrs:{action:"#",method:"POST"}},[e("div",{staticClass:"cart__field"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.isCartLoading,expression:"isCartLoading"}],staticStyle:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center",width:"100%",height:"40vh"}},[e("div",{staticClass:"spinner-4"}),e("h2",{staticStyle:{"padding-top":"25px"}},[t._v(" Загрузка товаров корзины... ")])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isCartLoadingFailed,expression:"isCartLoadingFailed"}],staticClass:"cart__list"},[e("p",{staticStyle:{"padding-top":"25px","text-align":"center"}},[t._v(" Похоже произошла ошибка. Попробуйте перезагрузить страницу. ")])]),t._l(t.products,(function(t){return e("CartItem",{key:t.id,attrs:{id:t.id,price:t.price,title:t.title,"color-code":t.colorCode,"color-title":t.colorTitle,amount:t.quantity,image:t.image,productId:t.productId}})}))],2),e("div",{staticClass:"cart__block"},[e("p",{staticClass:"cart__desc"},[t._v(" Мы посчитаем стоимость доставки на следующем этапе ")]),e("p",{staticClass:"cart__price"},[t._v(" Итого: "),e("span",[t._v(t._s(t.prettyTotalPrice))])]),t.cart.length?e("router-link",{staticClass:"cart__button button button--primery",attrs:{tag:"button",to:{name:"order"},type:"submit"}},[t._v(" Оформить заказ ")]):t._e()],1)])])])},rt=[function(){var t=this,e=t._self._c;return e("li",{staticClass:"breadcrumbs__item"},[e("a",{staticClass:"breadcrumbs__link"},[t._v(" Корзина ")])])}],it=function(){var t=this,e=t._self._c;return e("ul",{staticClass:"cart__list"},[e("li",{staticClass:"cart__item product"},[e("div",{staticClass:"product__pic"},[e("img",{attrs:{src:t.image,width:"120",height:"120",alt:t.title}})]),e("h3",{staticClass:"product__title"},[t._v(" "+t._s(t.title)+" ")]),e("p",{staticClass:"product__info product__info--color"},[t._v(" Цвет: "),e("span",[e("i",{style:{"background-color":t.colorCode}}),t._v(" "+t._s(t.colorTitle)+" ")])]),e("span",{staticClass:"product__code"},[t._v(" Артикул: "+t._s(t.id)+" ")]),e("div",{staticClass:"product__counter form__counter"},[e("button",{attrs:{type:"button","aria-label":"Убрать один товар",disabled:1===t.updateAmount},on:{click:function(e){return e.preventDefault(),t.dicrement.apply(null,arguments)}}},[e("svg",{attrs:{width:"10",height:"10",fill:"currentColor"}},[e("use",{attrs:{"xlink:href":"#icon-minus"}})])]),e("label",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.updateAmount,expression:"updateAmount"}],attrs:{type:"text",name:"count"},domProps:{value:t.updateAmount},on:{input:function(e){e.target.composing||(t.updateAmount=e.target.value)}}})]),e("button",{attrs:{type:"button","aria-label":"Добавить один товар"},on:{click:function(e){return e.preventDefault(),t.increment.apply(null,arguments)}}},[e("svg",{attrs:{width:"10",height:"10",fill:"currentColor"}},[e("use",{attrs:{"xlink:href":"#icon-plus"}})])])]),e("b",{staticClass:"product__price"},[t._v(" "+t._s(t.totalProductPrice)+" ")]),e("button",{staticClass:"product__del button-del",attrs:{type:"button","aria-label":"Удалить товар из корзины"},on:{click:function(e){return e.preventDefault(),t.deleteProduct.apply(null,arguments)}}},[t.isDeleteLoading?e("div",{staticClass:"spinner-9",staticStyle:{width:"20px",height:"20px"}}):e("svg",{attrs:{width:"20",height:"20",fill:"currentColor"}},[e("use",{attrs:{"xlink:href":"#icon-close"}})])])])])},st=[],ot={props:["id","title","price","colorCode","colorTitle","amount","image","productId"],computed:{...(0,n.mapState)(["isDeleteLoading","isDeleteLoadingFailed"]),updateAmount:{get(){return this.amount},set(t){this.updateProductAmount({productId:this.productId,basketItemId:this.id,amount:t})}},totalProductPrice(){return W(this.price*this.updateAmount)}},methods:{...(0,n.mapActions)({updateProductAmount:"updateCartProductAmount",deleteProductCart:"deleteProductFromCart"}),deleteProduct(){this.deleteProductCart({basketItemId:this.id,productId:this.productId})},increment(){this.updateAmount+=1},dicrement(){this.updateAmount-=1}}},lt=ot,nt=(0,p.Z)(lt,it,st,!1,null,null,null),ct=nt.exports,dt={components:{CartItem:ct},computed:{...(0,n.mapState)(["isCartLoading","isCartLoadingFailed"]),...(0,n.mapGetters)({productsCart:"getCartDetailsProduct",totalAmount:"getCartProductsAmount",totalPrice:"getCartTotalPrice",cart:"getCart"}),products(){return this.productsCart?this.productsCart.map((t=>({...t,id:t.id,productId:t.product.id,price:t.price,title:t.product.title,colorCode:t.color.color.code,colorTitle:t.color.color.title,image:t.color.gallery?t.color.gallery[0].file.url:"https://westsiderc.org/wp-content/uploads/2019/08/Image-Not-Available.png"}))):[]},prettyTotalPrice(){return W(this.totalPrice)}}},ut=dt,pt=(0,p.Z)(ut,at,rt,!1,null,null,null),mt=pt.exports,_t=function(){var t=this,e=t._self._c;return t.isProductLoading?e("div",{staticStyle:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center",width:"100%",height:"60vh"}},[e("div",{staticClass:"spinner-4"}),e("h2",{staticStyle:{"padding-top":"25px"}},[t._v(" Загрузка товара... ")])]):e("main",{staticClass:"content container"},[e("div",{staticClass:"content__top"},[e("ul",{staticClass:"breadcrumbs"},[e("li",{staticClass:"breadcrumbs__item"},[e("router-link",{staticClass:"breadcrumbs__link",attrs:{to:{name:"main"}}},[t._v(" Каталог ")])],1),e("li",{staticClass:"breadcrumbs__item"},[e("a",{staticClass:"breadcrumbs__link",attrs:{href:"#"}},[t._v(" "+t._s(t.product[0].categoryTitle)+" ")])]),e("li",{staticClass:"breadcrumbs__item"},[e("a",{staticClass:"breadcrumbs__link"},[t._v(" "+t._s(t.product[0].title)+" ")])])])]),e("section",{staticClass:"item"},[e("div",{staticClass:"item__pics pics"},[e("div",{staticClass:"pics__wrapper"},[e("img",{attrs:{width:"570",height:"570",src:t.getColors[t.currentColorId].image,alt:t.product[0].title}})]),e("ul",{staticClass:"pics__list"},t._l(t.getColors,(function(a){return e("li",{key:a.colorId,staticClass:"pics__item"},[e("a",{staticClass:"pics__link",class:{"pics__link--current":a.colorId===t.activeColorId},attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.changeImage(a.colorId)},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.changeImage(a.colorId)}}},[e("img",{attrs:{width:"98",height:"98",src:a.image,alt:t.product[0].title}})])])})),0)]),e("div",{staticClass:"item__info"},[e("span",{staticClass:"item__code"},[t._v("Артикул: "+t._s(t.product[0].id))]),e("h2",{staticClass:"item__title"},[t._v(" "+t._s(t.product[0].title)+" ")]),e("div",{staticClass:"item__form"},[e("form",{staticClass:"form",attrs:{action:"#",method:"POST"},on:{submit:function(e){return e.preventDefault(),t.addToCart.apply(null,arguments)}}},[e("div",{staticClass:"item__row item__row--center"},[e("div",{staticClass:"form__counter"},[e("button",{attrs:{type:"button","aria-label":"Убрать один товар",disabled:1===t.productCount},on:{click:function(e){return e.preventDefault(),t.dicrement.apply(null,arguments)}}},[e("svg",{attrs:{width:"12",height:"12",fill:"currentColor"}},[e("use",{attrs:{"xlink:href":"#icon-minus"}})])]),e("label",[e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.productCount,expression:"productCount",modifiers:{number:!0}}],attrs:{type:"text",name:"count"},domProps:{value:t.productCount},on:{input:function(e){e.target.composing||(t.productCount=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),e("button",{attrs:{type:"button","aria-label":"Добавить один товар"},on:{click:function(e){return e.preventDefault(),t.increment.apply(null,arguments)}}},[e("svg",{attrs:{width:"12",height:"12",fill:"currentColor"}},[e("use",{attrs:{"xlink:href":"#icon-plus"}})])])]),e("b",{staticClass:"item__price"},[t._v(" "+t._s(t.totalProductPrice)+" ")])]),e("div",{staticClass:"item__row"},[e("fieldset",{staticClass:"form__block"},[e("legend",{staticClass:"form__legend"},[t._v("Цвет")]),e("ul",{staticClass:"colors colors--black"},t._l(t.getColors,(function(a){return e("li",{key:a.colorId,staticClass:"colors__item"},[e("label",{staticClass:"colors__label",on:{click:function(e){return e.preventDefault(),t.changeImage(a.colorId)},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.changeImage(a.colorId)}}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.activeColorId,expression:"activeColorId"}],staticClass:"colors__radio sr-only",attrs:{type:"radio",name:"color-item"},domProps:{value:a.colorId,checked:t.activeColorId,checked:t._q(t.activeColorId,a.colorId)},on:{change:function(e){t.activeColorId=a.colorId}}}),e("span",{staticClass:"colors__value",style:{"background-color":a.colorCode}})])])})),0)]),e("fieldset",{staticClass:"form__block"},[e("legend",{staticClass:"form__legend"},[t._v("Размер")]),e("label",{staticClass:"form__label form__label--small form__label--select"},[e("select",{directives:[{name:"model",rawName:"v-model.number",value:t.currentSizeId,expression:"currentSizeId",modifiers:{number:!0}}],staticClass:"form__select",attrs:{type:"text",name:"category"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(e){var a="_value"in e?e._value:e.value;return t._n(a)}));t.currentSizeId=e.target.multiple?a:a[0]}}},[e("option",{attrs:{disabled:"",value:"0"}},[t._v("Выбрать")]),t._l(t.getSizes,(function(a){return e("option",{key:a.sizeId,domProps:{value:a.sizeId}},[t._v(" "+t._s(a.sizeTitle)+" ")])}))],2)])])]),e("button",{staticClass:"item__button button button--primery",attrs:{type:"submit",disabled:t.isAddLoading}},[t._v(" В корзину ")]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isAddLoading,expression:"isAddLoading"}],staticStyle:{"padding-top":"10px"}},[t._v(" Добавляем товар в корзину... ")]),t.isAddLoadingEnded?e("div",{staticStyle:{"padding-top":"10px"}},[t._v("Товар добавлен в корзину")]):t._e()])])]),e("div",{staticClass:"item__desc"},[e("ul",{staticClass:"tabs"},[e("li",{staticClass:"tabs__item"},[e("a",{staticClass:"tabs__link",class:{"tabs__link--current":"base-item-information"===t.currentTab},on:{click:function(e){return e.preventDefault(),t.changeTab("base-item-information")},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.changeTab("base-item-information")}}},[t._v(" Информация о товаре ")])]),e("li",{staticClass:"tabs__item"},[e("a",{staticClass:"tabs__link",class:{"tabs__link--current":"base-item-delivery"===t.currentTab},on:{click:function(e){return e.preventDefault(),t.changeTab("base-item-delivery")},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.changeTab("base-item-delivery")}}},[t._v(" Доставка и возврат ")])])]),e(t.currentTab,{tag:"component"})],1)])])},ft=[],ht=function(){var t=this;t._self._c;return t._m(0)},vt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"item__content"},[e("h3",[t._v("Состав:")]),e("p",[t._v(" 60% хлопок"),e("br"),t._v(" 30% полиэстер"),e("br")]),e("h3",[t._v("Уход:")]),e("p",[t._v(" Машинная стирка при макс. 30ºC короткий отжим"),e("br"),t._v(" Гладить при макс. 110ºC"),e("br"),t._v(" Не использовать машинную сушку"),e("br"),t._v(" Отбеливать запрещено"),e("br"),t._v(" Не подвергать химчистке"),e("br")])])}],gt={},Ct=(0,p.Z)(gt,ht,vt,!1,null,null,null),yt=Ct.exports,bt=function(){var t=this;t._self._c;return t._m(0)},Pt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"item__content"},[e("h3",[t._v("Доставка:")]),e("p",[t._v(" 1. Курьерская доставка по Москве и Московской области – 290 ₽"),e("br"),t._v(" 2.Самовывоз из магазина. Список и адреса магазинов Вы можете посмотреть здесь"),e("br")]),e("h3",[t._v("Возврат:")]),e("p",[t._v(" Любой возврат должен быть осуществлен в течение Возвраты в магазине БЕСПЛАТНО."),e("br"),t._v(" Вы можете вернуть товары в любой магазин. Магазин должен быть расположен в стране, в которой Вы осуществили покупку. БЕСПЛАТНЫЙ возврат в Пункт выдачи заказов."),e("br"),t._v(" Для того чтобы вернуть товар в одном из наших Пунктов выдачи заказов, позвоните по телефону 8 800 600 90 09"),e("br")])])}],It={},kt=(0,p.Z)(It,bt,Pt,!1,null,null,null),Dt=kt.exports,xt={data(){return{productData:null,currentTab:"base-item-information",productCount:1,currentColorId:0,currentSizeId:0,isProductLoading:!1,isProductLoadingFailed:!1}},components:{BaseItemInformation:yt,BaseItemDelivery:Dt},computed:{...(0,n.mapState)(["isAddLoading","isAddLoadingFailed","isAddLoadingEnded"]),product(){return this.productData?this.productData.map((t=>({...t,price:t.price,categoryTitle:t.category.title,colorsGallery:t.colors.map((t=>({colorProductId:t.id,colorId:t.color.id,colorCode:t.color.code,colorTitle:t.color.title,image:t.gallery?t.gallery[0].file.url:"https://westsiderc.org/wp-content/uploads/2019/08/Image-Not-Available.png"}))),sizes:t.sizes.map((t=>({sizeId:t.id,sizeTitle:t.title})))}))):[]},getColors(){return this.product[0].colorsGallery},getSizes(){return this.product[0].sizes},activeColorId:{get(){return this.getColors[this.currentColorId].colorId},set(t){const e=this.getColors.findIndex((e=>e.colorId===t));this.currentColorId=e}},totalProductPrice(){return W(this.productCount*this.product[0].price)}},methods:{...(0,n.mapActions)(["addProductToCart"]),increment(){this.productCount+=1},dicrement(){this.productCount-=1},changeImage(t){const e=this.getColors.findIndex((e=>e.colorId===t));this.currentColorId=e},changeTab(t){this.currentTab=t},loadProduct(){return this.isProductLoading=!0,this.isProductLoadingFailed=!1,y.Z.get(`https://vue-moire.skillbox.cc/api/products/${this.$route.params.id}`).then((t=>this.productData=[t.data])).catch((()=>{this.isProductLoading=!1,this.isProductLoadingFailed=!0})).finally((()=>this.isProductLoading=!1))},addToCart(){this.addProductToCart({productId:this.$route.params.id,colorId:this.activeColorId,sizeId:this.currentSizeId,amount:this.productCount})}},created(){this.loadProduct()}},Lt=xt,At=(0,p.Z)(Lt,_t,ft,!1,null,null,null),St=At.exports,wt=function(){var t=this,e=t._self._c;return e("main",{staticClass:"content container"},[e("div",{staticClass:"content__top"},[e("ul",{staticClass:"breadcrumbs"},[e("li",{staticClass:"breadcrumbs__item"},[e("router-link",{staticClass:"breadcrumbs__link",attrs:{to:{name:"main"}}},[t._v(" Каталог ")])],1),e("li",{staticClass:"breadcrumbs__item"},[e("router-link",{staticClass:"breadcrumbs__link",attrs:{to:{name:"cart"}}},[t._v(" Корзина ")])],1),t._m(0)]),t._m(1)]),e("section",{staticClass:"cart"},[e("form",{staticClass:"cart__form form",attrs:{action:"#",method:"POST"},on:{submit:function(e){return e.preventDefault(),t.postOrder.apply(null,arguments)}}},[e("div",{staticClass:"cart__field"},[e("div",{staticClass:"cart__data"},[e("BaseFormInput",{attrs:{title:"ФИО",error:t.formError.name,placeholder:"Введите ваше полное имя"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}}),e("BaseFormInput",{attrs:{title:"Адрес доставки",error:t.formError.address,placeholder:"Введите ваш адрес"},model:{value:t.formData.address,callback:function(e){t.$set(t.formData,"address",e)},expression:"formData.address"}}),e("BaseFormInput",{attrs:{type:"phone",title:"Телефон",error:t.formError.phone,placeholder:"Введите ваш телефон"},model:{value:t.formData.phone,callback:function(e){t.$set(t.formData,"phone",e)},expression:"formData.phone"}}),e("BaseFormInput",{attrs:{type:"email",title:"Email",error:t.formError.email,placeholder:"Введи ваш Email"},model:{value:t.formData.email,callback:function(e){t.$set(t.formData,"email",e)},expression:"formData.email"}}),e("BaseFormTextarea",{attrs:{title:"Комментарий к заказу",error:t.formError.comment,placeholder:"Ваши пожелания"},model:{value:t.formData.comment,callback:function(e){t.$set(t.formData,"comment",e)},expression:"formData.comment"}})],1),e("div",{staticClass:"cart__options"},[e("h3",{staticClass:"cart__title"},[t._v("Доставка")]),e("ul",{staticClass:"cart__options options"},t._l(t.orderDeliveries,(function(a){return e("BaseFormRadioDelivery",{key:a.id,attrs:{group:"delivery","type-id":a.id,title:a.title,price:a.price,"remade-price":a.remadePrice},model:{value:t.formData.deliveryTypeId,callback:function(e){t.$set(t.formData,"deliveryTypeId",e)},expression:"formData.deliveryTypeId"}})})),1),e("h3",{staticClass:"cart__title"},[t._v("Оплата")]),e("ul",{staticClass:"cart__options options"},t._l(t.paymentsData,(function(a){return e("BaseFormRadioPayment",{key:a.id,attrs:{title:a.title,typeId:a.id,group:"payment"},model:{value:t.formData.paymentTypeId,callback:function(e){t.$set(t.formData,"paymentTypeId",e)},expression:"formData.paymentTypeId"}})})),1)])]),e("div",{staticClass:"cart__block"},[e("div",{directives:[{name:"show",rawName:"v-show",value:0===t.orderProducts.length,expression:"orderProducts.length === 0"}],staticClass:"cart__orders"},[e("div",{staticClass:"spinner-4",staticStyle:{margin:"0 auto"}}),e("h2",{staticStyle:{"padding-top":"25px","text-align":"center"}},[t._v(" Загрузка заказа... ")])]),e("ul",{staticClass:"cart__orders"},t._l(t.orderProducts,(function(t){return e("OrderItem",{key:t.article,attrs:{title:t.title,price:t.price,amount:t.quantity,article:t.article}})})),1),e("div",{staticClass:"cart__total"},[e("p",[t._v("Доставка: "),e("b",[t._v(t._s(t.typeDelivery?t.prettyDeliveryTypePrice:"бесплатно"))])]),e("p",[t._v("Итого: "),e("b",[t._v(t._s(t.totalAmountProducts))]),t._v(" товара на сумму "),e("b",[t._v(t._s(t.prettyTotalPrice))])])]),e("button",{staticClass:"cart__button button button--primery",attrs:{type:"submit",disabled:t.isSendOrderLoading}},[t._v(" Оформить заказ ")])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isSendOrderLoadingFailed,expression:"isSendOrderLoadingFailed"}],staticClass:"cart__error form__error-block"},[e("h4",[t._v("Заявка не отправлена!")]),e("p",[t._v(" Произошла ошибка. Попробуйте обновить страницу или корректно заполнить данные. ")])])])])])},Tt=[function(){var t=this,e=t._self._c;return e("li",{staticClass:"breadcrumbs__item"},[e("a",{staticClass:"breadcrumbs__link"},[t._v(" Оформление заказа ")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"content__row"},[e("h1",{staticClass:"content__title"},[t._v(" Оформление заказа ")])])}],Ft=(a(560),function(){var t=this,e=t._self._c;return e("BaseFormField",{attrs:{title:t.title,error:t.error}},[e("label",["checkbox"===t.type?e("input",{directives:[{name:"model",rawName:"v-model",value:t.dataValue,expression:"dataValue"}],staticClass:"form__input",attrs:{placeholder:t.placeholder,type:"checkbox"},domProps:{checked:Array.isArray(t.dataValue)?t._i(t.dataValue,null)>-1:t.dataValue},on:{change:function(e){var a=t.dataValue,r=e.target,i=!!r.checked;if(Array.isArray(a)){var s=null,o=t._i(a,s);r.checked?o<0&&(t.dataValue=a.concat([s])):o>-1&&(t.dataValue=a.slice(0,o).concat(a.slice(o+1)))}else t.dataValue=i}}}):"radio"===t.type?e("input",{directives:[{name:"model",rawName:"v-model",value:t.dataValue,expression:"dataValue"}],staticClass:"form__input",attrs:{placeholder:t.placeholder,type:"radio"},domProps:{checked:t._q(t.dataValue,null)},on:{change:function(e){t.dataValue=null}}}):e("input",{directives:[{name:"model",rawName:"v-model",value:t.dataValue,expression:"dataValue"}],staticClass:"form__input",attrs:{placeholder:t.placeholder,type:t.type},domProps:{value:t.dataValue},on:{input:function(e){e.target.composing||(t.dataValue=e.target.value)}}})])])}),Ot=[],$t=function(){var t=this,e=t._self._c;return e("label",{staticClass:"form__label"},[t._t("default"),e("span",{staticClass:"form__value"},[t._v(t._s(t.title))]),t.error?e("span",{staticClass:"form__error"},[t._v(t._s(t.error))]):t._e()],2)},Zt=[],Mt={props:["title","error"]},Vt=Mt,Et=(0,p.Z)(Vt,$t,Zt,!1,null,null,null),Nt=Et.exports,Kt={props:["title","placeholder","error","value"],components:{BaseFormField:Nt},computed:{dataValue:{get(){return this.value},set(t){this.$emit("input",t)}}}},zt={props:{type:{default:"text"}},mixins:[Kt]},Bt=zt,qt=(0,p.Z)(Bt,Ft,Ot,!1,null,null,null),jt=qt.exports,Ut=function(){var t=this,e=t._self._c;return e("BaseFormField",{attrs:{title:t.title,error:t.error}},[e("label",[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.dataValue,expression:"dataValue"}],staticClass:"form__input form__input--area",attrs:{placeholder:t.placeholder},domProps:{value:t.dataValue},on:{input:function(e){e.target.composing||(t.dataValue=e.target.value)}}})])])},Rt=[],Gt={mixins:[Kt]},Ht=Gt,Jt=(0,p.Z)(Ht,Ut,Rt,!1,null,null,null),Qt=Jt.exports,Wt=function(){var t=this,e=t._self._c;return e("li",{staticClass:"options__item"},[e("label",{staticClass:"options__label"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.dataValue,expression:"dataValue"}],staticClass:"options__radio sr-only",attrs:{name:t.group,type:"radio"},domProps:{value:t.typeId,checked:t._q(t.dataValue,t.typeId)},on:{change:function(e){t.dataValue=t.typeId}}}),e("span",{staticClass:"options__value"},[t._v(" "+t._s(t.title)+" "),e("b",[t._v(t._s(+t.price?t.remadePrice:"бесплатно"))])])])])},Xt=[],Yt={props:["value"],computed:{dataValue:{get(){return this.value},set(t){this.$emit("input",t)}}}},te={props:["typeId","title","price","remadePrice","group"],mixins:[Yt]},ee=te,ae=(0,p.Z)(ee,Wt,Xt,!1,null,null,null),re=ae.exports,ie=function(){var t=this,e=t._self._c;return e("li",{staticClass:"options__item"},[e("label",{staticClass:"options__label"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.dataValue,expression:"dataValue"}],staticClass:"options__radio sr-only",attrs:{name:t.group,type:"radio"},domProps:{value:t.typeId,checked:t._q(t.dataValue,t.typeId)},on:{change:function(e){t.dataValue=t.typeId}}}),e("span",{staticClass:"options__value"},[t._v(" "+t._s(t.title)+" ")])])])},se=[],oe={props:["title","group","typeId"],mixins:[Yt]},le=oe,ne=(0,p.Z)(le,ie,se,!1,null,null,null),ce=ne.exports,de=function(){var t=this,e=t._self._c;return e("li",{staticClass:"cart__order"},[e("h3",[t._v(t._s(t.title))]),e("b",[t._v(t._s(t.totalProductPrice))]),e("span",[t._v("Артикул: "+t._s(t.article))])])},ue=[],pe={props:["title","article","price","amount"],computed:{totalProductPrice(){return W(this.amount*this.price)}}},me=pe,_e=(0,p.Z)(me,de,ue,!1,null,null,null),fe=_e.exports,he={data(){return{formData:{deliveryTypeId:1,paymentTypeId:1},formError:{},orderStatus:!1,isSendOrderLoading:!1,isSendOrderLoadingFailed:!1,formErrorMessage:{}}},components:{BaseFormInput:jt,BaseFormTextarea:Qt,OrderItem:fe,BaseFormRadioDelivery:re,BaseFormRadioPayment:ce},computed:{...(0,n.mapState)(["deliveriesData","paymentsData"]),...(0,n.mapGetters)({cartProducts:"getCartDetailsProduct",totalAmountProducts:"getTotalProductsAmount",totalProductsPrice:"getCartTotalPrice"}),orderDeliveries(){return this.deliveriesData?this.deliveriesData.map((t=>({...t,remadePrice:W(t.price)}))):[]},typeDelivery(){return this.deliveriesData?+this.deliveriesData.find((t=>t.id===this.formData.deliveryTypeId)).price:0},orderProducts(){return this.cartProducts?this.cartProducts.map((t=>({...t,article:t.id,id:t.product.id,price:t.price,title:t.product.title}))):[]},prettyTotalPrice(){return W(this.totalProductsPrice+this.typeDelivery)},prettyDeliveryTypePrice(){return W(this.typeDelivery)}},methods:{...(0,n.mapActions)(["loadDeliveries","loadPayments"]),loadPayment(){this.loadPayments({deliveryTypeId:this.formData.deliveryTypeId})},postOrder(){return this.isSendOrderLoading=!0,this.isSendOrderLoadingFailed=!1,y.Z.post("https://vue-moire.skillbox.cc/api/orders",{...this.formData},{params:{userAccessKey:this.$store.state.userAccessKey}}).then((t=>{this.$store.commit("resetCart"),this.$store.commit("updateOrderInfo"),this.$router.push({name:"orderInfo",params:{id:t.data.id}}),this.orderStatus=!0})).catch((t=>{this.formError=t.response.data.error.request||{},this.isSendOrderLoading=!1,this.isSendOrderLoadingFailed=!0,this.formErrorMessage=t.response.data.error.request||{}})).finally((()=>this.isSendOrderLoading=!1))}},watch:{"formData.deliveryTypeId"(){this.loadPayment(),this.formData.paymentTypeId=null}},created(){this.loadDeliveries(),this.loadPayment()}},ve=he,ge=(0,p.Z)(ve,wt,Tt,!1,null,null,null),Ce=ge.exports,ye=function(){var t=this,e=t._self._c;return t.isOrderLoading?e("div",{staticStyle:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center",width:"100%",height:"60vh"}},[e("div",{staticClass:"spinner-4"}),e("h2",[t._v(" Загрузка информации о заказе... ")])]):e("main",{staticClass:"content container"},[e("div",{staticClass:"content__top"},[e("ul",{staticClass:"breadcrumbs"},[e("li",{staticClass:"breadcrumbs__item"},[e("router-link",{staticClass:"breadcrumbs__link",attrs:{to:{name:"main"}}},[t._v(" Каталог ")])],1),e("li",{staticClass:"breadcrumbs__item"},[e("router-link",{staticClass:"breadcrumbs__link",attrs:{to:{name:"cart"}}},[t._v(" Корзина ")])],1),t._m(0)]),e("h1",{staticClass:"content__title"},[t._v(" Заказ оформлен "),e("span",[t._v("№ "+t._s(t.orderData.id))])])]),e("section",{staticClass:"cart"},[e("form",{staticClass:"cart__form form",attrs:{action:"#",method:"POST"}},[e("div",{staticClass:"cart__field"},[e("p",{staticClass:"cart__message"},[t._v(" Благодарим за выбор нашего магазина. На Вашу почту придет письмо с деталями заказа. Наши менеджеры свяжутся с Вами в течение часа для уточнения деталей доставки. ")]),e("ul",{staticClass:"dictionary"},[e("li",{staticClass:"dictionary__item"},[e("span",{staticClass:"dictionary__key"},[t._v(" Получатель ")]),e("span",{staticClass:"dictionary__value"},[t._v(" "+t._s(t.orderData.name)+" ")])]),e("li",{staticClass:"dictionary__item"},[e("span",{staticClass:"dictionary__key"},[t._v(" Адрес доставки ")]),e("span",{staticClass:"dictionary__value"},[t._v(" "+t._s(t.orderData.address)+" ")])]),e("li",{staticClass:"dictionary__item"},[e("span",{staticClass:"dictionary__key"},[t._v(" Телефон ")]),e("span",{staticClass:"dictionary__value"},[t._v(" "+t._s(t.orderData.phone)+" ")])]),e("li",{staticClass:"dictionary__item"},[e("span",{staticClass:"dictionary__key"},[t._v(" Email ")]),e("span",{staticClass:"dictionary__value"},[t._v(" "+t._s(t.orderData.email)+" ")])]),e("li",{staticClass:"dictionary__item"},[e("span",{staticClass:"dictionary__key"},[t._v(" Способ оплаты ")]),e("span",{staticClass:"dictionary__value"},[t._v(" "+t._s(t.orderData.paymentType)+" ")])]),e("li",{staticClass:"dictionary__item"},[e("span",{staticClass:"dictionary__key"},[t._v(" Комментарий к заказу ")]),e("span",{staticClass:"dictionary__value"},[t._v(" "+t._s(t.orderData.comment)+" ")])])])]),e("div",{staticClass:"cart__block"},[e("ul",{staticClass:"cart__orders"},t._l(t.orderData.basket.items,(function(t){return e("OrderItem",{key:t.id,attrs:{title:t.product.title,article:t.id,price:t.price,amount:t.quantity}})})),1),e("div",{staticClass:"cart__total"},[e("p",[t._v("Доставка: "),e("b",[t._v(t._s(t.prettyDeliveryPrice))])]),e("p",[t._v("Итого: "),e("b",[t._v(t._s(t.getOrderTotalAmount))]),t._v(" товара на сумму "),e("b",[t._v(t._s(t.prettyTotalPrice))])])])])])])])},be=[function(){var t=this,e=t._self._c;return e("li",{staticClass:"breadcrumbs__item"},[e("a",{staticClass:"breadcrumbs__link"},[t._v(" Оформление заказа ")])])}],Pe={components:{OrderItem:fe},computed:{...(0,n.mapState)(["orderData","isOrderLoading","isOrderLoadingFailed"]),...(0,n.mapGetters)(["getOrderTotalAmount"]),prettyTotalPrice(){return W(this.orderData.totalPrice)},prettyDeliveryPrice(){return W(this.orderData.deliveryType.price)}},methods:{...(0,n.mapActions)(["loadOrderInfo"])},created(){this.$store.orderData&&this.$store.orderData.id===this.$route.params.id||this.loadOrderInfo({orderId:this.$route.params.id})}},Ie=Pe,ke=(0,p.Z)(Ie,ye,be,!1,null,null,null),De=ke.exports,xe=function(){var t=this,e=t._self._c;return e("h2",{staticStyle:{"text-align":"center",padding:"20px"}},[t._v("Ничего не найдено")])},Le=[],Ae={},Se=(0,p.Z)(Ae,xe,Le,!1,null,null,null),we=Se.exports;r.ZP.use(k.Z);const Te=[{name:"main",component:et,path:"/"},{name:"cart",component:mt,path:"/cart"},{name:"product",component:St,path:"/product/:id"},{name:"order",component:Ce,path:"/order"},{name:"orderInfo",component:De,path:"/order/:id"},{name:"notFound",component:we,path:"*"}],Fe=new k.Z({routes:Te});var Oe=Fe;new r.ZP({store:I,router:Oe,render:t=>t(g)}).$mount("#app")}},e={};function a(r){var i=e[r];if(void 0!==i)return i.exports;var s=e[r]={exports:{}};return t[r].call(s.exports,s,s.exports,a),s.exports}a.m=t,function(){var t=[];a.O=function(e,r,i,s){if(!r){var o=1/0;for(d=0;d<t.length;d++){r=t[d][0],i=t[d][1],s=t[d][2];for(var l=!0,n=0;n<r.length;n++)(!1&s||o>=s)&&Object.keys(a.O).every((function(t){return a.O[t](r[n])}))?r.splice(n--,1):(l=!1,s<o&&(o=s));if(l){t.splice(d--,1);var c=i();void 0!==c&&(e=c)}}return e}s=s||0;for(var d=t.length;d>0&&t[d-1][2]>s;d--)t[d]=t[d-1];t[d]=[r,i,s]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var r in e)a.o(e,r)&&!a.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,r){var i,s,o=r[0],l=r[1],n=r[2],c=0;if(o.some((function(e){return 0!==t[e]}))){for(i in l)a.o(l,i)&&(a.m[i]=l[i]);if(n)var d=n(a)}for(e&&e(r);c<o.length;c++)s=o[c],a.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return a.O(d)},r=self["webpackChunkshop_moire"]=self["webpackChunkshop_moire"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=a.O(void 0,[998],(function(){return a(6001)}));r=a.O(r)})();
//# sourceMappingURL=app.63572587.js.map